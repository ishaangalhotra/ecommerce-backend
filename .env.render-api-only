# Render Backend Environment Configuration (API-Only Mode)
# Copy these to your Render environment variables

# =============================================================================
# DEPLOYMENT ARCHITECTURE SETTINGS
# =============================================================================

# API-only mode optimization
API_ONLY_MODE=true
DISABLE_STATIC_SERVING=true

# Frontend is deployed on Vercel
FRONTEND_URL=https://your-frontend.vercel.app

# Node environment
NODE_ENV=production

# =============================================================================
# MEMORY OPTIMIZATION FOR RENDER FREE TIER
# =============================================================================

# Reduce memory footprint
ENABLE_CLUSTER_MODE=true
CLUSTER_WORKERS=1

# Disable memory-intensive features
ENABLE_RESPONSE_CACHING=false
DISABLE_REDIS=true
REDIS_ENABLED=false

# Optimize compression
ENABLE_COMPRESSION=true
COMPRESSION_LEVEL=4

# Reduce logging in production
ENABLE_REQUEST_LOGGING=false
DEBUG_MODE=false

# =============================================================================
# CORS CONFIGURATION FOR VERCEL FRONTEND
# =============================================================================

# Your Vercel frontend URLs (update with actual URLs)
FRONTEND_URLS=https://your-frontend.vercel.app,https://your-frontend-git-main.vercel.app
CLIENT_URL=https://your-frontend.vercel.app
ADMIN_URL=https://your-frontend.vercel.app/admin

# Additional CORS origins if needed
CORS_ORIGINS=https://your-frontend.vercel.app
ALLOWED_ORIGINS=https://your-frontend.vercel.app

# =============================================================================
# API SERVER CONFIGURATION
# =============================================================================

# Server settings (Render provides these)
# PORT=10000  # Render sets this automatically
# HOST=0.0.0.0

# App info
APP_NAME=QuickLocal API
APP_VERSION=2.0.0
API_VERSION=v1
API_BASE_PATH=/api/v1

# Instance identification
INSTANCE_ID=render-api-001

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# MongoDB connection (replace with your actual connection string)
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/quicklocal?retryWrites=true&w=majority

# Database optimization for memory
DB_POOL_SIZE=5
DB_CONNECT_TIMEOUT_MS=10000

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Generate secure secrets (use different values)
JWT_SECRET=your-super-secure-jwt-secret-here
JWT_REFRESH_SECRET=your-super-secure-refresh-secret-here
COOKIE_SECRET=your-super-secure-cookie-secret-here
SESSION_SECRET=your-super-secure-session-secret-here

# Security headers
ENABLE_HELMET=true
HELMET_CSP_ENABLED=true

# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_MAX=1000
RATE_LIMIT_WINDOW_MS=900000

# =============================================================================
# FEATURES CONFIGURATION
# =============================================================================

# Essential marketplace features
FEATURE_REVIEWS=true
FEATURE_RATINGS=true
FEATURE_WISHLIST=true
FEATURE_LIVE_TRACKING=true
FEATURE_CHAT=true

# Delivery and payment
DELIVERY_ENABLED=true
RAZORPAY_ENABLED=true
STRIPE_ENABLED=true

# Email notifications
ENABLE_EMAIL_NOTIFICATIONS=true

# =============================================================================
# PERFORMANCE OPTIMIZATION
# =============================================================================

# Memory limits for Render free tier
MAX_REQUEST_SIZE=5mb
MAX_FILE_SIZE=5242880

# Request timeout
REQUEST_TIMEOUT=15000

# Session configuration optimized for memory
SESSION_COOKIE_MAX_AGE=86400000
SESSION_COOKIE_HTTP_ONLY=true
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_SAME_SITE=strict

# =============================================================================
# MONITORING AND HEALTH CHECKS
# =============================================================================

ENABLE_METRICS=true
ENABLE_API_DOCS=true
ENABLE_ERROR_TRACKING=true

# =============================================================================
# IMPORTANT NOTES
# =============================================================================

# 1. Replace 'https://your-frontend.vercel.app' with your actual Vercel URL
# 2. Replace all 'your-super-secure-*' values with actual secure secrets
# 3. Replace the MongoDB connection string with your actual database URL
# 4. Add any additional environment variables your app needs

# =============================================================================
# DEPLOYMENT CHECKLIST
# =============================================================================

# ✅ Backend deployed to Render with these environment variables
# ✅ Frontend deployed to Vercel with API_URL pointing to this backend
# ✅ CORS configured to allow Vercel frontend domain
# ✅ API_ONLY_MODE enabled to reduce memory usage
# ✅ Database connection string updated
# ✅ All secrets generated and secured
