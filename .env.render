# ================================
# RENDER FREE PLAN OPTIMIZED CONFIG
# ================================

# ==== CORE ====
NODE_ENV=production
# Render automatically assigns PORT - don't hardcode it!
# PORT will be set by Render automatically
APP_NAME=QuickLocal
APP_VERSION=2.0.0
API_BASE_PATH=/api/v1
API_VERSION=v1
TIMEZONE=Asia/Kolkata
CURRENCY=INR

# ==== DOMAINS ====
# Update these with your actual Render service URL
API_URL=https://quicklocal-backend.onrender.com
CLIENT_URL=https://quicklocal-backend.onrender.com
ADMIN_URL=https://quicklocal-backend.onrender.com/admin
CDN_URL=https://ik.imagekit.io/phea4zmjs

# ==== RENDER FREE PLAN CORS SUPPORT ====
# Include your Render service URL + common development URLs
FRONTEND_URLS=https://quicklocal-backend.onrender.com,https://www.quicklocal.shop,https://quicklocal.shop,http://localhost:10000,http://127.0.0.1:10000

ALLOWED_ORIGINS=https://quicklocal-backend.onrender.com,https://www.quicklocal.shop,https://quicklocal.shop,http://localhost:10000,http://127.0.0.1:10000

CORS_ORIGINS=https://quicklocal-backend.onrender.com,https://www.quicklocal.shop,https://quicklocal.shop,http://localhost:10000,http://127.0.0.1:10000

TRUST_PROXY=1
# Use Render domain for cookies
COOKIE_DOMAIN=.onrender.com

# ==== DATABASE ====
MONGODB_URI=mongodb+srv://ishaangalhotra:1998Ishaan@cluster0.qu0indk.mongodb.net/quicklocal-prod?retryWrites=true&w=majority&appName=Cluster0
MONGO_URI=mongodb+srv://ishaangalhotra:1998Ishaan@cluster0.qu0indk.mongodb.net/quicklocal-prod?retryWrites=true&w=majority&appName=Cluster0
MONGO_DB_NAME=quicklocal-prod

# DATABASE OPTIMIZATION FOR RENDER FREE PLAN
DB_POOL_SIZE=3
DB_CONNECT_TIMEOUT_MS=20000
DB_SOCKET_TIMEOUT_MS=30000
DB_MAX_RETRY_ATTEMPTS=3
DB_RETRY_DELAY_MS=2000

# ==== AUTH & SECURITY ====
JWT_SECRET=S3cureJWTKeyWith!UpperLower12345678
JWT_REFRESH_SECRET=R3freshT0k3nS3cr3tF0rL0ngT3rmAuth!
JWT_ACCESS_EXPIRES=15m
JWT_REFRESH_EXPIRES=7d
COOKIE_SECRET=quicklocal_cookie_secret_2024_production_32chars_minimum
SESSION_SECRET=quicklocal_session_secret_2024_production_64chars_minimum_secure_key
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTP_ONLY=true
SESSION_COOKIE_SAME_SITE=strict

# ==== RENDER FREE PLAN SECURITY (Lightweight) ====
HELMET_ENABLED=true
HELMET_CSP_ENABLED=false
# Lower rate limits for free plan
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=500
AUTH_RATE_LIMIT_MAX=15
ORDER_RATE_LIMIT_MAX=5
MAX_LOGIN_ATTEMPTS=3
LOGIN_LOCKOUT_TIME=10

# ==== EMAIL ====
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USERNAME=galhotraemporium@gmail.com
SMTP_PASSWORD=Galhotra@1998
EMAIL_FROM=galhotraemporium@gmail.com
EMAIL_FROM_NAME=QuickLocal

# ==== IMAGEKIT ====
IMAGEKIT_PUBLIC_KEY=public_/+DxWFuWSKoxwts4BsW7g1g1dZA=
IMAGEKIT_PRIVATE_KEY=private_vfExL/ayh6TEA0AMeHxn4CwuFsI=
IMAGEKIT_URL_ENDPOINT=https://ik.imagekit.io/phea4zmjs
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/webp,image/jpg
# Smaller file size for free plan
MAX_FILE_SIZE=5242880

# ==== ENHANCED MARKETPLACE FEATURES ====
FEATURE_ENHANCED_UI=true
FEATURE_FLIPKART_STYLE=true
FEATURE_REVIEWS=true
FEATURE_RATINGS=true
FEATURE_WISHLIST=true
# Disable resource-intensive features for free plan
FEATURE_CHAT=false
FEATURE_LOYALTY_PROGRAM=false
FEATURE_REFERRAL_PROGRAM=false
FEATURE_BULK_ORDERS=false
FEATURE_MULTIPLE_ADDRESSES=false
FEATURE_SCHEDULED_DELIVERY=false

# ==== UI CONFIGURATION (Optimized for free plan) ====
UI_PRODUCTS_PER_PAGE=12
UI_MAX_SEARCH_SUGGESTIONS=5
UI_ANIMATION_ENABLED=true

# ==== RENDER FREE PLAN PERFORMANCE ====
ENABLE_COMPRESSION=true
COMPRESSION_LEVEL=4
# Shorter cache for free plan
ENABLE_RESPONSE_CACHING=true
CACHE_TTL=1800
# Minimal logging to save resources
ENABLE_REQUEST_LOGGING=false
ENABLE_METRICS=false
DEBUG_MODE=false

# ==== STATIC FILES (Optimized) ====
STATIC_FILES_ENABLED=true
# Shorter cache time for free plan
STATIC_MAX_AGE=3600
ENABLE_ETAG=true
ENABLE_LAST_MODIFIED=true

# ==== DELIVERY (Simplified) ====
DELIVERY_ENABLED=true
FEATURE_LIVE_TRACKING=false
WEBSOCKETS_ENABLED=false
BASE_DELIVERY_FEE=25
FREE_DELIVERY_THRESHOLD=500

# ==== NOTIFICATIONS (Minimal) ====
ENABLE_PUSH_NOTIFICATIONS=false
ENABLE_SMS_NOTIFICATIONS=false
ENABLE_IN_APP_NOTIFICATIONS=false
ENABLE_EMAIL_NOTIFICATIONS=true

# ==== RENDER FREE PLAN MEMORY OPTIMIZATION ====
# Critical for 512MB limit!
# Note: --optimize-for-size is not supported in Node.js 24.4.1
NODE_OPTIONS=--max-old-space-size=450 --expose-gc
UV_THREADPOOL_SIZE=2
MAX_REQUEST_SIZE=5mb
CONNECTION_POOL_SIZE=2

# ==== CLUSTERING (DISABLED for free plan) ====
ENABLE_CLUSTER_MODE=false
CLUSTER_WORKERS=1

# ==== API DOCUMENTATION ====
ENABLE_API_DOCS=false

# ==== RENDER SPECIFIC OPTIMIZATIONS ====
# Keep service warm (helps with cold starts)
KEEP_WARM_ENABLED=true
KEEP_WARM_INTERVAL=840000

# Request timeout for free plan
REQUEST_TIMEOUT=25000

# Session optimization for free plan
SESSION_COOKIE_MAX_AGE=86400000

# Disable Redis to save memory
REDIS_ENABLED=false
DISABLE_REDIS=true

# Webhook timeout
WEBHOOK_TIMEOUT=15000

# Process exit settings
GRACEFUL_SHUTDOWN_TIMEOUT=15000

# ================================
# SUPABASE HYBRID AUTHENTICATION
# ================================
# CRITICAL: Add these to Render environment variables dashboard

# Supabase Configuration (for hybrid auth system)
SUPABASE_URL=https://pmvhsjezhuokwygvhhqk.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBtdmhzamV6aHVva3d5Z3ZoaHFrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc2NTU3MDUsImV4cCI6MjA3MzIzMTcwNX0.ZrVjuqB28Qer7F7zSdG_rJIs_ZQZhX1PNyrmpK-Qojg
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBtdmhzamV6aHVva3d5Z3ZoaHFrIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NzY1NTcwNSwiZXhwIjoyMDczMjMxNzA1fQ.YOUR_SERVICE_KEY_HERE

# Hybrid Auth Configuration
SUPABASE_REALTIME_ENABLED=true
HYBRID_AUTH_ENABLED=true
MEMORY_MONITORING_ENABLED=true

# Analytics and Logging (Memory Efficient)
LOG_TO_SUPABASE=true
ANALYTICS_TO_SUPABASE=true
